# 美食分享系统技术架构文档

## 1. 项目概述

### 1.1 技术选型
- **前端框架**: Vue.js 3.x + JavaScript
- **后端框架**: Spring Boot 2.7.x
- **数据库**: MySQL 8.0
- **缓存**: Redis 6.x
- **构建工具**: Maven (后端) + Vite (前端)

### 1.2 架构原则
- 前后端分离
- RESTful API设计
- 模块化开发
- 简单易维护

## 2. 系统架构设计

### 2.1 整体架构图
```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端 (Vue.js) │    │   后端 (Spring) │    │   数据库 (MySQL)│
│                 │    │                 │    │                 │
│  - 用户界面     │◄──►│  - REST API     │◄──►│  - 用户数据     │
│  - 路由管理     │    │  - 业务逻辑     │    │  - 内容数据     │
│  - 状态管理     │    │  - 数据访问     │    │  - 系统配置     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌─────────────────┐
                       │   缓存 (Redis)  │
                       │                 │
                       │  - 会话缓存     │
                       │  - 热点数据     │
                       └─────────────────┘
```

### 2.2 技术栈详细说明

#### 2.2.1 前端技术栈
- **Vue.js 3.x**: 主框架，使用Composition API
- **Vue Router**: 路由管理
- **Pinia**: 状态管理
- **Axios**: HTTP客户端
- **Element Plus**: UI组件库
- **Vite**: 构建工具
- **ESLint + Prettier**: 代码规范

#### 2.2.2 后端技术栈
- **Spring Boot**: 主框架
- **Spring Web**: Web开发
- **Spring Data JPA**: 数据访问层
- **Spring Security**: 安全认证
- **MySQL Connector**: 数据库驱动
- **Jedis**: Redis客户端
- **Jackson**: JSON处理
- **Hibernate Validator**: 数据验证

## 3. 项目结构设计

### 3.1 前端项目结构
```
food-sharing-frontend/
├── public/                 # 静态资源
├── src/
│   ├── assets/            # 资源文件
│   ├── components/        # 通用组件
│   │   ├── common/        # 公共组件
│   │   └── business/      # 业务组件
│   ├── views/             # 页面组件
│   │   ├── auth/          # 认证相关页面
│   │   ├── home/          # 首页
│   │   ├── profile/       # 个人中心
│   │   ├── food/          # 美食相关页面
│   │   └── merchant/      # 商家页面
│   ├── router/            # 路由配置
│   ├── store/             # 状态管理
│   ├── api/               # API接口
│   ├── utils/             # 工具函数
│   ├── styles/            # 样式文件
│   └── main.js            # 入口文件
├── package.json
└── vite.config.js
```

### 3.2 后端项目结构
```
food-sharing-backend/
├── src/main/java/com/foodsharing/
│   ├── FoodSharingApplication.java    # 启动类
│   ├── config/                        # 配置类
│   │   ├── SecurityConfig.java
│   │   ├── RedisConfig.java
│   │   └── WebConfig.java
│   ├── controller/                    # 控制器层
│   │   ├── AuthController.java
│   │   ├── UserController.java
│   │   ├── FoodController.java
│   │   └── MerchantController.java
│   ├── service/                       # 服务层
│   │   ├── UserService.java
│   │   ├── FoodService.java
│   │   └── MerchantService.java
│   ├── repository/                    # 数据访问层
│   │   ├── UserRepository.java
│   │   ├── FoodRepository.java
│   │   └── MerchantRepository.java
│   ├── entity/                        # 实体类
│   │   ├── User.java
│   │   ├── Food.java
│   │   └── Merchant.java
│   ├── dto/                          # 数据传输对象
│   ├── utils/                        # 工具类
│   └── exception/                    # 异常处理
└── src/main/resources/
    ├── application.yml
    └── static/
```

## 4. 数据库设计

### 4.1 数据库选择
- **MySQL 8.0**: 主数据库，存储业务数据
- **Redis**: 缓存数据库，存储会话和热点数据

### 4.2 连接配置
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/food_sharing?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
    username: root
    password: password
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  redis:
    host: localhost
    port: 6379
    database: 0
```

## 5. API设计规范

### 5.1 RESTful API规范
- **GET**: 查询数据
- **POST**: 创建数据
- **PUT**: 更新数据
- **DELETE**: 删除数据

### 5.2 API路径设计
```
/api/v1/auth/          # 认证相关
/api/v1/users/         # 用户管理
/api/v1/foods/         # 美食内容
/api/v1/merchants/     # 商家管理
/api/v1/comments/      # 评论管理
/api/v1/upload/        # 文件上传
```

### 5.3 统一响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": "2024-11-15T21:51:00"
}
```

## 6. 安全设计

### 6.1 认证方案
- **JWT Token**: 用户认证
- **Spring Security**: 安全框架
- **密码加密**: BCrypt加密

### 6.2 权限控制
- 基于角色的访问控制(RBAC)
- 接口级权限验证
- 前端路由权限控制

## 7. 文件存储方案

### 7.1 本地存储
- 图片存储在 `/uploads/images/` 目录
- 视频存储在 `/uploads/videos/` 目录
- 通过静态资源映射访问

### 7.2 文件上传限制
- 图片格式: jpg, jpeg, png, gif
- 图片大小: 最大5MB
- 视频格式: mp4, avi
- 视频大小: 最大50MB

## 8. 缓存策略

### 8.1 Redis缓存应用
- **用户会话**: 存储用户登录状态
- **热门内容**: 缓存热门美食数据
- **搜索结果**: 缓存常用搜索结果
- **验证码**: 存储短信验证码

### 8.2 缓存过期策略
- 用户会话: 7天过期
- 热门内容: 1小时过期
- 搜索结果: 30分钟过期
- 验证码: 5分钟过期

## 9. 部署方案

### 9.1 开发环境
- **前端**: npm run dev (Vite开发服务器)
- **后端**: IDEA直接运行或 mvn spring-boot:run
- **数据库**: 本地MySQL + Redis

### 9.2 生产环境
- **前端**: npm run build 后部署到Nginx
- **后端**: 打包成jar包，java -jar运行
- **数据库**: 独立的MySQL和Redis服务器

## 10. 开发工具和环境

### 10.1 开发工具
- **IDE**: IntelliJ IDEA (后端) + VS Code (前端)
- **数据库工具**: Navicat / MySQL Workbench
- **API测试**: Postman
- **版本控制**: Git

### 10.2 环境要求
- **JDK**: 11或以上
- **Node.js**: 16或以上
- **MySQL**: 8.0或以上
- **Redis**: 6.0或以上

## 11. 性能优化

### 11.1 前端优化
- 组件懒加载
- 图片懒加载
- 路由懒加载
- 打包优化

### 11.2 后端优化
- 数据库索引优化
- SQL查询优化
- Redis缓存
- 分页查询

---

**文档版本**: v1.0  
**创建日期**: 2024年11月15日  
**适用项目**: 美食分享系统毕业设计
